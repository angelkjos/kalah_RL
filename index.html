<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalah/Mancala - RL Agent</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Kalah/Mancala</h1>

        <div class="game-info">
            <div class="player-info">
                <h2>Player 2</h2>
                <div class="score" id="player2-score">0</div>
            </div>
            <div class="turn-info">
                <p id="turn-display">Player 1's Turn</p>
                <div class="button-group">
                    <button id="ai-toggle-btn">ü§ñ Play vs AI</button>
                    <select id="ai-difficulty" style="display:none;">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard (RL Agent)</option>
                    </select>
                    <button id="undo-btn">‚è™ Undo</button>
                    <button id="reset-btn">New Game</button>
                </div>
            </div>
            <div class="player-info">
                <h2>Player 1</h2>
                <div class="score" id="player1-score">0</div>
            </div>
        </div>

        <div class="board">
            <!-- Player 2's store (right side) -->
            <div class="store-container player2-store-container">
                <div class="store" id="store-1">
                    <div class="store-label">P2 Store</div>
                    <div class="seeds">0</div>
                </div>
            </div>

            <div class="pits-container">
                <!-- Player 2's pits (top row, indices 6-11) -->
                <div class="row player2-row">
                    <div class="pit" data-pit="11">
                        <div class="pit-number">12</div>
                        <div class="seeds" id="pit-11">4</div>
                    </div>
                    <div class="pit" data-pit="10">
                        <div class="pit-number">11</div>
                        <div class="seeds" id="pit-10">4</div>
                    </div>
                    <div class="pit" data-pit="9">
                        <div class="pit-number">10</div>
                        <div class="seeds" id="pit-9">4</div>
                    </div>
                    <div class="pit" data-pit="8">
                        <div class="pit-number">9</div>
                        <div class="seeds" id="pit-8">4</div>
                    </div>
                    <div class="pit" data-pit="7">
                        <div class="pit-number">8</div>
                        <div class="seeds" id="pit-7">4</div>
                    </div>
                    <div class="pit" data-pit="6">
                        <div class="pit-number">7</div>
                        <div class="seeds" id="pit-6">4</div>
                    </div>
                </div>

                <!-- Player 1's pits (bottom row, indices 0-5) -->
                <div class="row player1-row">
                    <div class="pit" data-pit="0">
                        <div class="pit-number">1</div>
                        <div class="seeds" id="pit-0">4</div>
                    </div>
                    <div class="pit" data-pit="1">
                        <div class="pit-number">2</div>
                        <div class="seeds" id="pit-1">4</div>
                    </div>
                    <div class="pit" data-pit="2">
                        <div class="pit-number">3</div>
                        <div class="seeds" id="pit-2">4</div>
                    </div>
                    <div class="pit" data-pit="3">
                        <div class="pit-number">4</div>
                        <div class="seeds" id="pit-3">4</div>
                    </div>
                    <div class="pit" data-pit="4">
                        <div class="pit-number">5</div>
                        <div class="seeds" id="pit-4">4</div>
                    </div>
                    <div class="pit" data-pit="5">
                        <div class="pit-number">6</div>
                        <div class="seeds" id="pit-5">4</div>
                    </div>
                </div>
            </div>

            <!-- Player 1's store (left side) -->
            <div class="store-container player1-store-container">
                <div class="store" id="store-0">
                    <div class="store-label">P1 Store</div>
                    <div class="seeds">0</div>
                </div>
            </div>
        </div>

        <div class="rules">
            <h3>How to Play Kalah/Mancala</h3>
            <ul>
                <li><strong>Objective:</strong> Collect the most seeds in your store</li>
                <li><strong>Sowing:</strong> Pick up all seeds from one of your pits and distribute counter-clockwise, one per pit</li>
                <li><strong>Your Store:</strong> Seeds drop into your own store (skip opponent's store)</li>
                <li><strong>Extra Turn:</strong> If your last seed lands in your own store, take another turn</li>
                <li><strong>Capturing:</strong> If your last seed lands in an empty pit on your side, capture that seed plus all seeds from the opposite pit</li>
                <li><strong>Multi-lap:</strong> With 12+ seeds, skip your starting pit only on the first round</li>
                <li><strong>End Game:</strong> When one side is empty, each player collects remaining seeds on their side</li>
                <li><strong>Winner:</strong> Player with the most seeds in their store wins!</li>
            </ul>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
    <script src="kalah-engine.js"></script>
    <script src="kalah-ai-browser.js"></script>
    <script src="rl-agent-browser.js"></script>
    <script src="kalah-ui.js"></script>
</body>
</html>
